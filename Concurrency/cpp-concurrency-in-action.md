# C++ Concurrency in action

## 2. 线程管理

### 2.1 线程基本操作

启动线程: 等待线程结束or让其自主运行. 若是未作决定, 程序会终止. 因此, 即使有异常存在, 也要确保线程能够正确汇入(```join```)或者分离(```detached```). 尤其是要注意, 新旧线程各自对象的生命周期问题, 因为RAII机制的存在, 错误地访问数据会导致未定义行为

两种控制方式:

+ 分离```xxx.detach()```: 注意局部变量的有效性
+ 等待线程完成```xxx.join()```: 可以确保局部变量在线程完成后才销毁, ```joinable()```可判断状态
+ 其他灵活控制方式: 如查看一下进程是否结束, 等待一段时间
  + 条件变量
  + future

以下是```thread```的析构函数
```cpp
~thread()
{
    if (joinable())
        std::terminate();
}
```